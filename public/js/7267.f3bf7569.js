(self["webpackChunkhsa_spa"]=self["webpackChunkhsa_spa"]||[]).push([[7267],{4515:function(t,e,a){"use strict";a.r(e);var s=a(1601),i=a.n(s),o=a(6314),n=a.n(o),r=n()(i());r.push([t.id,".appointmentDetail[data-v-c245967c]{list-style:none;max-width:100%}article[data-v-c245967c]{display:flex;flex-direction:column;justify-content:center;align-items:center;background-color:#fff;border:1px solid var(--black);max-width:100%;max-height:32rem;padding:1rem;border-radius:8px}@media (max-width:1200px){.appointmentDetail[data-v-c245967c],article[data-v-c245967c]{max-width:100%}article[data-v-c245967c]{padding:.5rem}}@media (max-width:600px){article[data-v-c245967c]{display:grid;justify-items:center;width:100%}.appointmentDetail[data-v-c245967c]{width:100%;padding:0}}h4[data-v-c245967c]{font-size:var(--h5-laptop)}",""]),e["default"]=r},8418:function(t,e,a){"use strict";a.r(e);var s=a(1601),i=a.n(s),o=a(6314),n=a.n(o),r=n()(i());r.push([t.id,"h4[data-v-7736cf6e]{font-size:var(--h5-laptop);text-align:center;color:#000}h2[data-v-7736cf6e]{font-size:var(--h4-laptop)}.form-control[data-v-7736cf6e]{margin:.5rem 0;text-align:left}.form-control label[data-v-7736cf6e]{font-family:Open Sans,sans-serif;font-size:var(--h6-laptop);font-weight:700}form[data-v-7736cf6e]{gap:1rem}form[data-v-7736cf6e],section[data-v-7736cf6e]{display:flex;flex-direction:column;max-width:100%}section[data-v-7736cf6e]{margin:1rem 2rem;padding:0;align-items:center;flex:1}.form-container[data-v-7736cf6e]{padding:1rem;background-color:transparent}input[data-v-7736cf6e],select[data-v-7736cf6e]{display:block;width:100%;margin-top:.5rem;height:2.5rem;border:1px solid var(--primary-color);padding:.5rem;border-radius:8px;font-size:var(--h6-laptop)}span[data-v-7736cf6e]{font-weight:400}input[data-v-7736cf6e]:focus{background-color:var(--black-5)}#validation-message[data-v-7736cf6e]{color:red;font-size:var(--h6-laptop)}",""]),e["default"]=r},6649:function(t,e,a){"use strict";a.d(e,{A:function(){return h}});var s=a(6768),i=a(4232),o=a(5130);const n={class:"appointmentDetail"};function r(t,e,a,r,d,l){const c=(0,s.g2)("card-details-grid-element"),u=(0,s.g2)("base-grid"),h=(0,s.g2)("base-button"),p=(0,s.g2)("base-button-container");return(0,s.uX)(),(0,s.CE)("li",n,[(0,s.Lk)("article",null,[(0,s.Lk)("h4",null,[(0,s.eW)(" Appointment "),(0,s.bo)((0,s.Lk)("span",null,(0,i.v_)(a.index+1),513),[[o.aG,a.index+1]])]),(0,s.bF)(u,null,{default:(0,s.k6)((()=>[(0,s.bF)(c,null,{default:(0,s.k6)((()=>[(0,s.eW)("Doctor: "+(0,i.v_)(l.getDoctorName),1)])),_:1}),(0,s.bF)(c,null,{default:(0,s.k6)((()=>[(0,s.eW)("Patient: "+(0,i.v_)(l.getPatientName),1)])),_:1}),(0,s.bF)(c,null,{default:(0,s.k6)((()=>[(0,s.eW)("Start: "+(0,i.v_)(l.getStartTime),1)])),_:1}),(0,s.bF)(c,null,{default:(0,s.k6)((()=>[(0,s.eW)("Date: "+(0,i.v_)(this.date),1)])),_:1}),(0,s.bF)(c,null,{default:(0,s.k6)((()=>[(0,s.eW)("Address: "+(0,i.v_)(l.getHospitalAddress),1)])),_:1}),(0,s.bF)(c,null,{default:(0,s.k6)((()=>[(0,s.eW)("Status: "+(0,i.v_)(this.status),1)])),_:1}),this.fees?((0,s.uX)(),(0,s.Wv)(c,{key:0},{default:(0,s.k6)((()=>[(0,s.eW)("Total Fees: "+(0,i.v_)(l.getTotalAmount),1)])),_:1})):(0,s.Q3)("",!0),(0,s.bF)(c,null,{default:(0,s.k6)((()=>[(0,s.eW)("Duration: "+(0,i.v_)(this.duration)+" minutes",1)])),_:1})])),_:1}),(0,s.bF)(p,null,{default:(0,s.k6)((()=>[(0,s.bF)(h,{link:"",to:l.appointmentDetailsLink,mode:"primary"},{default:(0,s.k6)((()=>[(0,s.eW)("View Detail")])),_:1},8,["to"]),l.isAdmin?((0,s.uX)(),(0,s.Wv)(h,{key:0,class:(0,i.C4)({disable:"approve"===d.disableButton}),onClick:e[0]||(e[0]=t=>l.approve(this.id)),mode:"outline"},{default:(0,s.k6)((()=>[(0,s.eW)("Approve")])),_:1},8,["class"])):(0,s.Q3)("",!0),l.isAdmin?((0,s.uX)(),(0,s.Wv)(h,{key:1,class:(0,i.C4)({disable:"cancel"===d.disableButton}),onClick:e[1]||(e[1]=t=>l.cancel(this.id)),mode:"outline"},{default:(0,s.k6)((()=>[(0,s.eW)("Cancel")])),_:1},8,["class"])):(0,s.Q3)("",!0),l.isDoctor?((0,s.uX)(),(0,s.Wv)(h,{key:2,link:"",to:l.appointmentConsultDetailsLink,mode:"outline"},{default:(0,s.k6)((()=>[(0,s.eW)("Consult(Doctor)")])),_:1},8,["to"])):(0,s.Q3)("",!0),l.isDoctor||l.isAdmin?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(h,{key:3,button:"",mode:"flat"},{default:(0,s.k6)((()=>[(0,s.eW)("Notify me")])),_:1}))])),_:1})])])}var d=a(4116),l={props:["id","doctorName","patientName","index","duration","startTime","date","status","hospitalAddress","fees"],data(){return{disableButton:null}},computed:{getTotalAmount(){return this.fees?.getTotalAmount??0},appointmentDetailsLink(){return this.isAdmin&&this.id?"/admin/appointments/"+this.id:this.isDoctor&&this.id?"/doctor/appointments/"+this.id:"/patient/appointments"===this.$route.path||"/doctor/appointments"===this.$route.path||"/doctor/appointments"===this.$route.path?this.$route.path+"/"+this.id:this.$route.path+"/appointments/"+this.id},appointmentConsultDetailsLink(){return"/doctor/consult/"+this.id??""},getHospitalAddress(){return(this.hospitalAddress?.streetAddress?.[0]??"")+(this.hospitalAddress?.streetAddress?.[1]??"")+(this.hospitalAddress?.city??"")},getStartTime(){if(this.startTime){const t=d.c9.fromFormat(this.startTime,"HH:mm",{zone:"Asia/Kolkata"});return t.toLocaleString({hour:"numeric",minute:"2-digit"}).toLowerCase()}return"Not available"},getDuration(){return this.duration+" Minutes"},getDoctorName(){return"doctor: "+(this.doctorName??"")},getPatientName(){return"patient: "+(this.patientName??"Unknown")},isDoctor(){return this.$store.getters["auth/isDoctor"]},isAdmin(){return this.$store.getters["auth/isAdmin"]}},methods:{approve(t){this.setDisableButton("approve"),this.$emit("approve",t)},cancel(t){this.setDisableButton("cancel"),this.$emit("cancel",t)},setDisableButton(t){this.disableButton===t?this.disableButton=null:this.disableButton=t}}},c=(a(5294),a(1241));const u=(0,c.A)(l,[["render",r],["__scopeId","data-v-c245967c"]]);var h=u},1766:function(t,e,a){"use strict";a.d(e,{A:function(){return l}});var s=a(6768);function i(t,e,a,i,o,n){const r=(0,s.g2)("AppointmentItem"),d=(0,s.g2)("base-list"),l=(0,s.g2)("base-card");return(0,s.uX)(),(0,s.Wv)(l,null,{default:(0,s.k6)((()=>[(0,s.bF)(d,null,{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(this.appointments,((t,e)=>((0,s.uX)(),(0,s.Wv)(r,{key:t.id,onApprove:n.approve,onCancel:n.cancel,id:t.id,doctorName:t.doctorName,patientName:t.patientName,index:e,duration:t.duration,startTime:t.startTime,date:t.date,status:t.status,hospitalAddress:t.hospitalAddress,fees:t.fees},null,8,["onApprove","onCancel","id","doctorName","patientName","index","duration","startTime","date","status","hospitalAddress","fees"])))),128))])),_:1})])),_:1})}var o=a(6649),n={props:["appointments"],components:{AppointmentItem:o.A},data(){return{}},methods:{cat(){console.log(this.appointments)},approve(t){this.$emit("approveTop",t)},cancel(t){this.$emit("cancelTop",t)}}},r=a(1241);const d=(0,r.A)(n,[["render",i]]);var l=d},7267:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return D}});var s=a(6768),i=a(4232),o=a(5130);const n=t=>((0,s.Qi)("data-v-7736cf6e"),t=t(),(0,s.jt)(),t),r={class:"error-message"},d=n((()=>(0,s.Lk)("p",{class:"success"}," Success",-1))),l=n((()=>(0,s.Lk)("h4",null,"Search Date and Shift",-1))),c={class:"form-container"},u={class:"form-control"},h=n((()=>(0,s.Lk)("label",{for:"date"},"Date",-1))),p={class:"form-control"},m=n((()=>(0,s.Lk)("label",{for:"shift"},"Shift",-1))),f=["value"],v={key:0,id:"validation-message"},g={key:0,class:"appointment-row-container"},k={key:0};function b(t,e,a,n,b,_){const A=(0,s.g2)("base-dialog"),y=(0,s.g2)("base-button"),L=(0,s.g2)("base-button-container"),C=(0,s.g2)("base-card"),D=(0,s.g2)("TheAppointmentsRow");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(A,{show:!!b.error,title:"An error occurred",onClose:_.handleError},{default:(0,s.k6)((()=>[(0,s.Lk)("p",r,(0,i.v_)(b.error),1)])),_:1},8,["show","onClose"]),(0,s.bF)(A,{show:b.success&&!b.error,title:"Appointment Booked Successfullly",onClose:_.handleSuccess},{default:(0,s.k6)((()=>[d])),_:1},8,["show","onClose"]),(0,s.Lk)("section",null,[(0,s.bF)(C,null,{default:(0,s.k6)((()=>[l,(0,s.Lk)("div",c,[(0,s.Lk)("form",null,[(0,s.Lk)("div",u,[h,(0,s.bo)((0,s.Lk)("input",{type:"date",id:"date","onUpdate:modelValue":e[0]||(e[0]=t=>b.date=t)},null,512),[[o.Jo,b.date,void 0,{trim:!0}]])]),(0,s.Lk)("div",p,[m,(0,s.bo)((0,s.Lk)("select",{id:"shift","onUpdate:modelValue":e[1]||(e[1]=t=>b.shift=t)},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(this.shifts,(t=>((0,s.uX)(),(0,s.CE)("option",{key:t,value:t},(0,i.v_)(_.getShifts(t)),9,f)))),128))],512),[[o.u1,b.shift]])])]),b.formIsValid?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",v,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(this.errors,(t=>((0,s.uX)(),(0,s.CE)("p",{key:t},(0,i.v_)(t),1)))),128))])),(0,s.bF)(L,null,{default:(0,s.k6)((()=>[(0,s.bF)(y,{mode:"primary",onClick:(0,o.D$)(_.search,["prevent"])},{default:(0,s.k6)((()=>[(0,s.eW)("Search")])),_:1},8,["onClick"]),(0,s.eW)(),(0,s.bF)(y,{mode:"outline",link:"",to:"/doctor/schedule/edit"},{default:(0,s.k6)((()=>[(0,s.eW)("Update Schedule")])),_:1})])),_:1})])])),_:1})]),0!==_.appointments?.length?((0,s.uX)(),(0,s.CE)("section",g,[(0,s.Lk)("h4",null,[(0,s.eW)(" Date: "),(0,s.Lk)("span",null,(0,i.v_)(this.date),1),(0,s.eW)(" Shift:"),(0,s.Lk)("span",null,(0,i.v_)(_.getShifts(this.shift)),1)]),0===this.appointments?.length?((0,s.uX)(),(0,s.CE)("p",k," No Appointments has been approved for this schedule. ")):(0,s.Q3)("",!0),(0,s.bF)(D,{appointments:_.appointments},null,8,["appointments"])])):(0,s.Q3)("",!0)],64)}a(4114);var _=a(1766),A=a(4116),y={components:{TheAppointmentsRow:_.A},data(){return{formIsValid:!0,isLoading:!1,error:null,success:!1,date:"",shifts:[],shift:{},errors:[]}},computed:{appointments(){const t=this.$store.getters["doctor/searchedScheduleAppointments"]??[],e=[];console.log(t);for(const a of t){const t={id:a?._id??"",patientName:a?.patientName??"",doctorName:a.doctorName??"",date:a?.ISTDateString??"",startTime:a?.startTime??"",hospitalAddress:a?.hospitalAddress??null,duration:a?.duration??null,hospitalName:a?.hospitalName??"",status:a?.status??"pending"};e.push(t)}return e}},methods:{getShifts(t){let e="";if(!t||!t.startTime||!t.endTime)return"";const a=A.c9.fromFormat(t?.startTime??"","HH:mm",{zone:"Asia/Kolkata"}).toLocaleString({hour:"numeric",minute:"2-digit"}).toLowerCase(),s=A.c9.fromFormat(t?.endTime??"","HH:mm",{zone:"Asia/Kolkata"}).toLocaleString({hour:"numeric",minute:"2-digit"}).toLowerCase();return e+=a+" - "+s,e},async search(){if(!this.checkForm())return void(this.formIsValid=!1);this.isLoading=!0;let t=JSON.stringify(this.shift);t=JSON.parse(t);const e={date:this.date,shift:t};try{await this.$store.dispatch("doctor/fetchSchedule",e)}catch(a){this.error=a}this.isLoading=!1},checkForm(){return this.errors=[],this.date&&/^\d{4}-\d{2}-\d{2}$/.test(this.date)||this.errors.push("date is invalid"),this.shift.startTime&&""!==this.shift.startTime&&/^([01]\d|2[0-3]):([0-5]\d)$/.test(this.shift?.startTime)||this.errors.push("Shift Start is invalid"),this.shift.endTime&&""!==this.shift.endTime&&/^([01]\d|2[0-3]):([0-5]\d)$/.test(this.shift?.endTime)||this.errors.push("Shift End is invalid"),!this.errors.length},handleError(){this.error=null},handleSuccess(){this.success=!1}},async created(){this.isLoading=!0;try{const t=this.$store.getters["doctor/todaySchedule"];t&&(this.date=t?.date??"",this.shift=t?.shift),await this.$store.dispatch("doctor/fetchDoctorDetails");const e=this.$store.getters["doctor/doctor"]??{};console.log(e?.shifts),this.shifts=e?.shifts??[],this.isLoading=!1}catch(t){this.error=t.message||"Failed to fetch, try later."}}},L=(a(2243),a(1241));const C=(0,L.A)(y,[["render",b],["__scopeId","data-v-7736cf6e"]]);var D=C},5294:function(t,e,a){var s=a(4515);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[t.id,s,""]]),s.locals&&(t.exports=s.locals);var i=a(8459).A;i("62d0b1f0",s,!0,{sourceMap:!1,shadowMode:!1})},2243:function(t,e,a){var s=a(8418);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[t.id,s,""]]),s.locals&&(t.exports=s.locals);var i=a(8459).A;i("e2b08a16",s,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=7267.f3bf7569.js.map