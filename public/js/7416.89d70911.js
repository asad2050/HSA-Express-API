(self["webpackChunkhsa_spa"]=self["webpackChunkhsa_spa"]||[]).push([[7416],{9737:function(o,t,e){"use strict";e.r(t);var a=e(1601),i=e.n(a),r=e(6314),n=e.n(r),s=n()(i());s.push([o.id,".doctor-details-container[data-v-692a46f7]{margin:1rem 0;max-width:100%;padding:0;display:flex;flex-direction:column;justify-content:stretch;align-items:center;gap:2rem}.card[data-v-692a46f7]{margin:0;max-width:100%;max-height:100%}ul[data-v-692a46f7]{padding:0;display:grid;grid-template-columns:1fr 1fr;row-gap:1rem;justify-content:center;align-items:start;grid-auto-flow:row}h4[data-v-692a46f7]{font-size:var(--h5-laptop);text-align:center;color:#000}.form-control[data-v-692a46f7]{margin:.5rem 0;text-align:left}.form-control label[data-v-692a46f7]{font-family:Open Sans,sans-serif;font-size:var(--h6-laptop);font-weight:700}form[data-v-692a46f7]{display:grid;grid-template-columns:1fr 1fr 1fr;gap:1rem}.form-container[data-v-692a46f7]{background-color:transparent;border:1px solid #000;border-radius:8px;padding:.5rem;width:100%;max-width:100%}input[data-v-692a46f7],select[data-v-692a46f7]{display:block;width:100%;margin-top:.5rem;height:2.5rem;border:1px solid var(--primary-color);padding:.5rem;border-radius:8px;font-size:var(--h6-laptop)}input[data-v-692a46f7]:focus{background-color:var(--black-5)}#validation-message[data-v-692a46f7],.error-message[data-v-692a46f7]{color:red;font-size:var(--h6-laptop)}li[data-v-692a46f7]{list-style:none;font-size:var(--h6-laptop);font-family:Open Sans;font-weight:700;margin:.5rem;text-align:left}li[data-v-692a46f7],span[data-v-692a46f7]{max-width:100%}span[data-v-692a46f7]{display:inline-block;line-height:145%}.top-container[data-v-692a46f7]{border:1px solid #000;border-radius:8px;padding:.5rem;max-width:100%;width:100%}",""]),t["default"]=s},7416:function(o,t,e){"use strict";e.r(t),e.d(t,{default:function(){return C}});var a=e(6768),i=e(4232),r=e(5130);const n=o=>((0,a.Qi)("data-v-692a46f7"),o=o(),(0,a.jt)(),o),s={class:"error-message"},l=n((()=>(0,a.Lk)("p",{class:"success"},"Appointment Booked Successfullly",-1))),d={class:"doctor-details-container"},c={class:"form-container"},u={class:"form-control"},m=n((()=>(0,a.Lk)("label",{for:"doctor"},"Doctor",-1))),p=["value"],f={class:"form-control"},h=n((()=>(0,a.Lk)("label",{for:"bookingDate"},"Date",-1))),g={class:"form-control"},k=n((()=>(0,a.Lk)("label",{for:"bookingTime"},"Time",-1))),b={class:"form-control"},v=n((()=>(0,a.Lk)("label",{for:"bookingDuration"},"Duration",-1))),L={key:0,id:"validation-message"};function y(o,t,e,n,y,w){const D=(0,a.g2)("base-dialog"),_=(0,a.g2)("base-spinner"),x=(0,a.g2)("base-button"),C=(0,a.g2)("base-button-container");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(D,{show:!!y.error,title:"An error occurred",onClose:w.handleError},{default:(0,a.k6)((()=>[(0,a.Lk)("p",s,(0,i.v_)(y.error),1)])),_:1},8,["show","onClose"]),(0,a.bF)(D,{show:y.isLoading,title:"Loading...",fixed:""},{default:(0,a.k6)((()=>[(0,a.bF)(_)])),_:1},8,["show"]),(0,a.bF)(D,{show:y.success,title:"Appointment Booked Successfullly",onClose:w.handleSuccess},{default:(0,a.k6)((()=>[l])),_:1},8,["show","onClose"]),(0,a.Lk)("div",d,[(0,a.Lk)("h4",null,(0,i.v_)(this.selectedHospital?.hospitalName??"NA"),1),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(this.selectedHospital?.doctorList??[],(o=>((0,a.uX)(),(0,a.CE)("div",{class:"top-container",key:o._id},[(0,a.Lk)("ul",null,[(0,a.Lk)("li",null,"Dr. "+(0,i.v_)(w.getDoctorName(o?.name)),1),(0,a.Lk)("li",null,[(0,a.eW)("Shifts: "),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(o?.shifts??[],(o=>((0,a.uX)(),(0,a.CE)("span",{key:o._id},(0,i.v_)(w.getshifts(o)),1)))),128))]),(0,a.Lk)("li",null,[(0,a.eW)("Specialty: "),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(o?.specialty??[],(o=>((0,a.uX)(),(0,a.CE)("span",{key:o},(0,i.v_)(o)+", ",1)))),128))])])])))),128)),(0,a.Lk)("div",c,[(0,a.Lk)("form",null,[(0,a.Lk)("div",u,[m,(0,a.bo)((0,a.Lk)("select",{id:"doctor","onUpdate:modelValue":t[0]||(t[0]=o=>y.doc=o)},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(this.selectedHospital?.doctorList??[],(o=>((0,a.uX)(),(0,a.CE)("option",{key:o._id,value:o._id},(0,i.v_)(w.getDoctorName(o?.name)),9,p)))),128))],512),[[r.u1,y.doc,void 0,{trim:!0}]])]),(0,a.Lk)("div",f,[h,(0,a.bo)((0,a.Lk)("input",{type:"date",id:"bookingDate","onUpdate:modelValue":t[1]||(t[1]=o=>y.bookingDate=o)},null,512),[[r.Jo,y.bookingDate,void 0,{trim:!0}]])]),(0,a.Lk)("div",g,[k,(0,a.bo)((0,a.Lk)("input",{type:"time",id:"bookingTime","onUpdate:modelValue":t[2]||(t[2]=o=>y.bookingTime=o)},null,512),[[r.Jo,y.bookingTime,void 0,{trim:!0}]])]),(0,a.Lk)("div",b,[v,(0,a.bo)((0,a.Lk)("input",{type:"number",id:"bookingDuration","onUpdate:modelValue":t[3]||(t[3]=o=>y.bookingDuration=o)},null,512),[[r.Jo,y.bookingDuration,void 0,{trim:!0}]])])]),y.formIsValid?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("p",L," Please enter proper date, time and duration should be 10 or above.")),(0,a.bF)(C,null,{default:(0,a.k6)((()=>[(0,a.bF)(x,{mode:"outline small",onClick:t[4]||(t[4]=o=>w.book(this.selectedHospital?.hospitalId))},{default:(0,a.k6)((()=>[(0,a.eW)("Book")])),_:1})])),_:1})])])],64)}var w=e(4116),D={props:["hId"],data(){return{selectedHospital:{},bookingDate:"",bookingTime:"",bookingDuration:0,formIsValid:!0,error:null,success:!1,isLoading:!1,doc:""}},computed:{},methods:{getDoctorName(o){return((o?.firstName??"")+" "+(o?.middleName??"")+" "+(o?.lastName??"")).trim()},getshifts(o){if(o?.startTime&&o?.endTime){const t=w.c9.fromFormat(o.startTime,"HH:mm",{zone:"Asia/Kolkata"}).toLocaleString({hour:"numeric",minute:"2-digit"}).toLowerCase(),e=w.c9.fromFormat(o.endTime,"HH:mm",{zone:"Asia/Kolkata"}).toLocaleString({hour:"numeric",minute:"2-digit"}).toLowerCase();return t+" - "+e}return""},getSpecialty(o){let t="";for(const e of o)t+=e+" ,";return t},async book(o){if(this.formIsValid=!0,""===this.bookingDate||!/^\d{4}-\d{2}-\d{2}$/.test(this.bookingDate)||""===this.bookingStart||!/^([01]\d|2[0-3]):([0-5]\d)$/.test(this.bookingTime)||this.bookingDuration<10||""===this.doc)return void(this.formIsValid=!1);const t={bookingDate:this.bookingDate,bookingDuration:this.bookingDuration,bookingStart:this.bookingTime,hospitalId:o,dId:this.doc};console.log(t);try{this.isLoading=!0,await this.$store.dispatch("patient/bookAppointment",t),this.success=!0}catch(e){this.error=e.message||"Failed to book, try later."}finally{this.isLoading=!1}},handleError(){this.error=null},handleSuccess(){this.success=!1;const o="/patient";this.$router.replace(o)}},created(){this.selectedHospital=this.$store.getters["patient/hospitalSearch"].find((o=>o.hospitalId===this.hId))??{}}},_=(e(7766),e(1241));const x=(0,_.A)(D,[["render",y],["__scopeId","data-v-692a46f7"]]);var C=x},7766:function(o,t,e){var a=e(9737);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[o.id,a,""]]),a.locals&&(o.exports=a.locals);var i=e(8459).A;i("c5d7da5e",a,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=7416.89d70911.js.map