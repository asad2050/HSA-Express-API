(self["webpackChunkhsa_spa"]=self["webpackChunkhsa_spa"]||[]).push([[2932],{3089:function(e,t,s){"use strict";s.r(t);var n=s(1601),o=s.n(n),a=s(6314),l=s.n(a),i=l()(o());i.push([e.id,"h1[data-v-20e0b8c6]{margin:1rem auto}section[data-v-20e0b8c6]{margin:1rem 2rem;max-width:100%;padding:0;display:flex;justify-content:center;align-items:flex-start;gap:2rem}.card[data-v-20e0b8c6]{width:100%}.card[data-v-20e0b8c6],ol[data-v-20e0b8c6]{margin:0;max-width:100%}ol[data-v-20e0b8c6]{display:grid;grid-template-columns:1fr 1fr;grid-auto-flow:row}.consulted[data-v-20e0b8c6],ol[data-v-20e0b8c6]{padding:1rem 0;list-style:none;justify-content:center}.consulted[data-v-20e0b8c6]{max-width:100%;margin:0;display:flex;flex-direction:column}p[data-v-20e0b8c6]{display:inline-block;margin:0;padding:0;font-family:inherit}li[data-v-20e0b8c6]{list-style:none;font-size:var(--h5-laptop);font-family:Open Sans;font-weight:400;line-height:145%;margin:.5rem;text-align:left;max-width:100%;word-wrap:break-word}.body[data-v-20e0b8c6]{display:flex;flex-direction:column;justify-content:center;font-weight:700}.body .dosage[data-v-20e0b8c6],.body .drug[data-v-20e0b8c6]{gap:.5rem}.body .parent[data-v-20e0b8c6]{display:flex;gap:.5rem}.body span[data-v-20e0b8c6]{font-weight:400}.body .heading[data-v-20e0b8c6]{font-weight:700;margin-right:.5rem}span[data-v-20e0b8c6]{font-weight:700;font-family:Open Sans,sans-serif;font-size:inherit}.form-control[data-v-20e0b8c6]{margin:.5rem 0;text-align:left;max-width:100%}.form-control label[data-v-20e0b8c6]{font-family:Open Sans,sans-serif;font-size:var(--h6-laptop);font-weight:700}form[data-v-20e0b8c6]{flex-direction:column;padding:1rem 0}.row[data-v-20e0b8c6],form[data-v-20e0b8c6]{display:flex;gap:1rem;max-width:100%}.row[data-v-20e0b8c6]{justify-content:flex-start;align-items:center;margin:1rem 0}.top-container h5[data-v-20e0b8c6]{font-size:var(--h5-laptop);margin:0;text-align:start}.top-container[data-v-20e0b8c6]{border:1px solid #000;border-radius:8px;padding:.5rem}.row h6[data-v-20e0b8c6]{margin:0}.row h6[data-v-20e0b8c6],input[data-v-20e0b8c6]{font-size:var(--h6-laptop)}input[data-v-20e0b8c6]{display:block;width:100%;margin-top:.5rem;height:2.5rem;border:1px solid var(--primary-color);padding:1rem;border-radius:8px;font-family:Open Sans}input[data-v-20e0b8c6]:focus{background-color:var(--black-5)}#validation-message[data-v-20e0b8c6]{color:red;font-size:var(--h6-laptop)}",""]),t["default"]=i},2932:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return de}});var n=s(6768),o=s(4232),a=s(5130);const l=e=>((0,n.Qi)("data-v-20e0b8c6"),e=e(),(0,n.jt)(),e),i={class:"error-message"},r=l((()=>(0,n.Lk)("p",{class:"success"},"Appointment Consultation Saved Successfullly",-1))),d={key:0},c=l((()=>(0,n.Lk)("h1",null,"Consult",-1))),p=l((()=>(0,n.Lk)("span",null,"Patient: ",-1))),u=l((()=>(0,n.Lk)("span",null,"Doctor: ",-1))),m=l((()=>(0,n.Lk)("span",null,"Date: ",-1))),h=l((()=>(0,n.Lk)("span",null,"Start Time: ",-1))),f=l((()=>(0,n.Lk)("span",null,"Duration: ",-1))),g={class:"consulted"},b={key:0,class:"prescription"},k=l((()=>(0,n.Lk)("span",{class:"heading"}," Prescriptions",-1))),v={class:"body"},L={class:"drug"},y=l((()=>(0,n.Lk)("span",{class:"heading"},"Drug:",-1))),A={class:"dosage"},C=l((()=>(0,n.Lk)("span",{class:"heading"}," Dosage: ",-1))),S={key:1},w=l((()=>(0,n.Lk)("span",{class:"heading"},"Lab Test: ",-1))),_={class:"body"},x={class:"heading"},F={key:2},T=l((()=>(0,n.Lk)("span",null,"Notes: ",-1))),E={key:3},D={class:"heading"},$={class:"body"},N={class:"heading"},P={class:"load-past"},X=l((()=>(0,n.Lk)("ol",null,null,-1))),W={class:"top-container"},R=l((()=>(0,n.Lk)("h5",null,"Prescription",-1))),J={class:"form-control"},I=l((()=>(0,n.Lk)("label",{for:""},"Drug",-1))),U=["onUpdate:modelValue"],V={class:"form-control"},O=l((()=>(0,n.Lk)("label",null,"Dosage",-1))),K=["onUpdate:modelValue"],z={class:"top-container"},Q=l((()=>(0,n.Lk)("h5",null,"Lab Test",-1))),j={class:"form-control"},H=l((()=>(0,n.Lk)("label",null,"Lab Test Name",-1))),M=["onUpdate:modelValue"],q={class:"form-control"},B=l((()=>(0,n.Lk)("label",{for:"notes"},"Notes",-1))),G={class:"top-container"},Y={class:"form-control"},Z=l((()=>(0,n.Lk)("label",{for:""},"Fee Type",-1))),ee=["onUpdate:modelValue"],te={class:"form-control"},se=l((()=>(0,n.Lk)("label",null,"Amount",-1))),ne=["onUpdate:modelValue"];function oe(e,t,s,l,oe,ae){const le=(0,n.g2)("base-dialog"),ie=(0,n.g2)("base-spinner"),re=(0,n.g2)("base-button"),de=(0,n.g2)("base-card"),ce=(0,n.g2)("base-button-container");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)(le,{show:!!oe.error,title:"An error occurred",onClose:ae.handleError},{default:(0,n.k6)((()=>[(0,n.Lk)("p",i,(0,o.v_)(oe.error),1)])),_:1},8,["show","onClose"]),(0,n.bF)(le,{show:oe.success,title:"Appointment Consultation Saved Successfullly",onClose:ae.handleSuccess},{default:(0,n.k6)((()=>[r])),_:1},8,["show","onClose"]),ae.selectedAppointment?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",d,[(0,n.bF)(ie)])),c,(0,n.Lk)("section",null,[(0,n.bF)(de,null,{default:(0,n.k6)((()=>[(0,n.Lk)("ol",null,[(0,n.Lk)("li",null,[p,(0,n.eW)((0,o.v_)(ae.getPatientName),1)]),(0,n.Lk)("li",null,[u,(0,n.eW)((0,o.v_)(ae.getDoctorName),1)]),(0,n.Lk)("li",null,[m,(0,n.eW)((0,o.v_)(ae.getDate),1)]),(0,n.Lk)("li",null,[h,(0,n.eW)((0,o.v_)(ae.getStartTime),1)]),(0,n.Lk)("li",null,[f,(0,n.eW)((0,o.v_)(ae.getDuration),1)])]),(0,n.Lk)("ol",g,[ae.isPrescriptionExist?((0,n.uX)(),(0,n.CE)("li",b,[k,(0,n.Lk)("span",v,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(ae.selectedAppointment?.prescriptions??[],((e,t)=>((0,n.uX)(),(0,n.CE)("span",{class:"parent",key:t},[(0,n.eW)((0,o.v_)(t+1)+" ",1),(0,n.Lk)("span",L,[y,(0,n.Lk)("span",null,(0,o.v_)(e.drug),1)]),(0,n.Lk)("span",A,[C,(0,n.Lk)("span",null,(0,o.v_)(e.dosage),1)])])))),128))])])):(0,n.Q3)("",!0),ae.isLabTestExist?((0,n.uX)(),(0,n.CE)("li",S,[w,(0,n.Lk)("span",_,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(ae.selectedAppointment?.testPrescribed??[],((e,t)=>((0,n.uX)(),(0,n.CE)("span",{class:"parent",key:t},[(0,n.Lk)("span",x,"Test "+(0,o.v_)(t+1)+": ",1),(0,n.Lk)("span",null,(0,o.v_)(e),1)])))),128))])])):(0,n.Q3)("",!0),ae.isNotesExist?((0,n.uX)(),(0,n.CE)("li",F,[T,(0,n.eW)((0,o.v_)(ae.getNotes),1)])):(0,n.Q3)("",!0),ae.isFeesExist?((0,n.uX)(),(0,n.CE)("li",E,[(0,n.Lk)("span",D," Fees: Total "+(0,o.v_)(ae.selectedAppointment.fees?.totalAmount??0),1),(0,n.Lk)("span",$,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(ae.selectedAppointment?.fees?.feesStructure??[],((e,t)=>((0,n.uX)(),(0,n.CE)("span",{class:"parent",key:t},[(0,n.eW)((0,o.v_)(t+1)+" ",1),(0,n.Lk)("span",N,(0,o.v_)(e.feesType)+":",1),(0,n.Lk)("span",null,(0,o.v_)(e.Amount)+"Rs.",1)])))),128))])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",P,[(0,n.bF)(re,{mode:"primary",onClick:e.loadPastData},{default:(0,n.k6)((()=>[(0,n.eW)("Load Past Data")])),_:1},8,["onClick"])]),X])),_:1}),(0,n.bF)(de,null,{default:(0,n.k6)((()=>[(0,n.Lk)("form",null,[(0,n.Lk)("div",W,[R,((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(ae.prescriptions,((e,t)=>((0,n.uX)(),(0,n.CE)("div",{class:"row",key:e},[(0,n.Lk)("h6",null,(0,o.v_)(t+1),1),(0,n.Lk)("div",J,[I,(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":t=>e.drug=t},null,8,U),[[a.Jo,e.drug,void 0,{trim:!0}]])]),(0,n.Lk)("div",V,[O,(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":t=>e.dosage=t},null,8,K),[[a.Jo,e.dosage,void 0,{trim:!0}]])]),(0,n.bF)(ce,null,{default:(0,n.k6)((()=>[(0,n.bF)(re,{mode:"primary small",onClick:(0,a.D$)(ae.addPrescriptionRow,["prevent"])},{default:(0,n.k6)((()=>[(0,n.eW)("+")])),_:1},8,["onClick"]),(0,n.bF)(re,{onClick:(0,a.D$)((e=>ae.removePrescriptionRow(t)),["prevent"]),mode:"red small"},{default:(0,n.k6)((()=>[(0,n.eW)("-")])),_:2},1032,["onClick"])])),_:2},1024)])))),128))]),(0,n.Lk)("div",z,[Q,((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(ae.labTests,((e,t)=>((0,n.uX)(),(0,n.CE)("div",{class:"row",key:e},[(0,n.Lk)("h6",null,(0,o.v_)(t+1),1),(0,n.Lk)("div",j,[H,(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":t=>e.name=t},null,8,M),[[a.Jo,e.name]])]),(0,n.bF)(ce,null,{default:(0,n.k6)((()=>[(0,n.bF)(re,{mode:"primary small",onClick:(0,a.D$)(ae.addLabTestRow,["prevent"])},{default:(0,n.k6)((()=>[(0,n.eW)("+")])),_:1},8,["onClick"]),(0,n.bF)(re,{onClick:(0,a.D$)((e=>ae.removeLabTestRow(t)),["prevent"]),mode:"red small"},{default:(0,n.k6)((()=>[(0,n.eW)("-")])),_:2},1032,["onClick"])])),_:2},1024)])))),128))]),(0,n.Lk)("div",q,[B,(0,n.bo)((0,n.Lk)("input",{type:"text",id:"notes","onUpdate:modelValue":t[0]||(t[0]=e=>oe.notes=e)},null,512),[[a.Jo,oe.notes,void 0,{trim:!0}]])]),(0,n.Lk)("div",G,[(0,n.Lk)("h5",null,"Total Fees: "+(0,o.v_)(ae.totalAmount),1),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(ae.feesStructure,((e,t)=>((0,n.uX)(),(0,n.CE)("div",{class:"row",key:e},[(0,n.Lk)("h6",null,(0,o.v_)(t+1),1),(0,n.Lk)("div",Y,[Z,(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":t=>e.feesType=t},null,8,ee),[[a.Jo,e.feesType,void 0,{trim:!0}]])]),(0,n.Lk)("div",te,[se,(0,n.bo)((0,n.Lk)("input",{type:"number","onUpdate:modelValue":t=>e.amount=t},null,8,ne),[[a.Jo,e.amount,void 0,{trim:!0}]])]),(0,n.bF)(ce,null,{default:(0,n.k6)((()=>[(0,n.bF)(re,{mode:"primary small",onClick:(0,a.D$)(ae.addFeeStructureRow,["prevent"])},{default:(0,n.k6)((()=>[(0,n.eW)("+")])),_:1},8,["onClick"]),(0,n.bF)(re,{onClick:(0,a.D$)((e=>ae.removeFeeStructureRow(t)),["prevent"]),mode:"red small"},{default:(0,n.k6)((()=>[(0,n.eW)("-")])),_:2},1032,["onClick"])])),_:2},1024)])))),128))]),(0,n.bF)(ce,null,{default:(0,n.k6)((()=>[(0,n.bF)(re,{mode:"primary",onClick:(0,a.D$)(ae.submit,["prevent"])},{default:(0,n.k6)((()=>[(0,n.eW)("Complete Consultation")])),_:1},8,["onClick"]),(0,n.bF)(re,{onClick:ae.cancel,mode:"red"},{default:(0,n.k6)((()=>[(0,n.eW)("Cancel")])),_:1},8,["onClick"])])),_:1})])])),_:1})])],64)}s(4114);var ae=s(4116),le={props:["aId"],data(){return{prescriptionsSetup:[{drug:"",dosage:""}],labTestsSetup:[{name:""}],fees:{totalAmount:0,feesStructure:[{feesType:"",amount:0}]},notes:"",error:null,success:!1}},watch:{fees(e,t){console.log(t),console.log(e)}},methods:{addPrescriptionRow(){this.prescriptionsSetup.push({drug:"",dosage:""})},removePrescriptionRow(e){this.prescriptionsSetup.length>1&&this.prescriptionsSetup.splice(e,1)},addLabTestRow(){this.labTestsSetup.push({name:""})},removeLabTestRow(e){this.labTestsSetup.length>1&&this.labTestsSetup.splice(e,1)},addFeeStructureRow(){this.fees.feesStructure.push({feesType:"",amount:0})},removeFeeStructureRow(e){this.fees.feesStructure.length>1&&this.fees.feesStructure.splice(e,1)},async submit(){let e=JSON.stringify(this.prescriptionsSetup);e=JSON.parse(e);let t=JSON.stringify(this.labTestsSetup);t=JSON.parse(t);let s=JSON.stringify(this.feesStructure);s=JSON.parse(s);for(const l of s)this.fees.totalAmount+=l.amount;console.log(t),console.log(e),console.log(s),console.log(this.fees),console.log(this.notes);const n=[];for(const l of t)n.push(l.name);const o={id:this.selectedAppointment._id,feesStructure:s,prescriptions:e,testPrescribed:n,notes:this.notes};console.log(o);try{await this.$store.dispatch("doctor/consultationComplete",o)}catch(a){this.error=a.message||"Failed to complete consultation, try again"}},cancel(){console.log("cancel"),this.$router.back()},handleError(){this.error=null},handleSuccess(){this.success=!1,this.$router.back()}},computed:{getDate(){return this.selectedAppointment?.ISTDateString??""},prescriptions(){return this.prescriptionsSetup},totalAmount(){return this.fees.totalAmount},labTests(){return this.labTestsSetup},feesStructure(){return this.fees.feesStructure},selectedAppointment(){return this.$store.getters["doctor/appointmentDetails"]},getHospitalAddress(){return this.selectedAppointment?.hospitalAddress?`${this.selectedAppointment.hospitalAddress.streetAddress[0]}, ${this.selectedAppointment.hospitalAddress.streetAddress[1]}, ${this.selectedAppointment.hospitalAddress.city}`:""},getStartTime(){if(this.selectedAppointment?.startTime){const e=ae.c9.fromFormat(this.selectedAppointment.startTime,"HH:mm",{zone:"Asia/Kolkata"});return e.toLocaleString({hour:"numeric",minute:"2-digit"}).toLowerCase()}return""},getDuration(){return this.selectedAppointment?.duration?`${this.selectedAppointment.duration} Minutes`:""},getDoctorName(){return this.selectedAppointment?.doctorName?`Dr.${this.selectedAppointment.doctorName}`:""},getPatientName(){return this.selectedAppointment?.patientName??""},getHospitalName(){return this.selectedAppointment?.hospitalName??""},getStatus(){return this.selectedAppointment?.status??""},getNotes(){return this.selectedAppointment?.notes??""},getFees(){if(!this.selectedAppointment?.fees)return"";const e=`totalAmount: ${this.selectedAppointment.fees.totalAmount}\n`;let t="";for(const s of this.selectedAppointment.fees.feesStructure)t+=`${s.feeType} Amount: ${s.amount}\n`;return e+t},getPrescription(){if(!this.selectedAppointment?.prescriptions||0===this.selectedAppointment?.prescriptions.length)return"";let e="";for(const t of this.selectedAppointment.prescriptions)e+=`drug: ${t.drug} dosage: ${t.dosage}\n`;return e},getLabTest(){if(!this.selectedAppointment?.testPrescribed)return"";let e="";for(const t of this.selectedAppointment.testPrescribed)e+=`Test name: ${t}\n`;return e},isPrescriptionExist(){return this.selectedAppointment?.prescriptions?.length>0??!1},isLabTestExist(){return this.selectedAppointment?.testPrescribed?.length>0??!1},isFeesExist(){return this.selectedAppointment?.fees?.totalAmount??0},isNotesExist(){return this.selectedAppointment?.notes??!1}},async created(){const e={aId:this.aId};this.isLoading=!0;try{await this.$store.dispatch("doctor/fetchAppointmentDetails",e),this.isLoading=!1}catch(t){this.error=t.message||"failed to fetch"}}},ie=(s(6714),s(1241));const re=(0,ie.A)(le,[["render",oe],["__scopeId","data-v-20e0b8c6"]]);var de=re},6714:function(e,t,s){var n=s(3089);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=s(8459).A;o("35b46c14",n,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=2932.e543295f.js.map