(self["webpackChunkhsa_spa"]=self["webpackChunkhsa_spa"]||[]).push([[781],{4240:function(e,t,a){"use strict";a.r(t);var i=a(1601),o=a.n(i),s=a(6314),r=a.n(s),l=r()(o());l.push([e.id,"section[data-v-65e2e0fe]{margin:2rem 4rem;padding:0;flex-direction:column;align-items:center;flex:1}form[data-v-65e2e0fe],section[data-v-65e2e0fe]{max-width:100%;display:flex}form[data-v-65e2e0fe]{flex-direction:column;gap:1rem;padding:1rem 0}.card[data-v-65e2e0fe],ol[data-v-65e2e0fe]{max-width:100%}ol[data-v-65e2e0fe]{padding:1rem 0;list-style:none;padding:0;display:grid;grid-template-columns:1fr 1fr;justify-content:center;grid-auto-flow:row}h1[data-v-65e2e0fe],ol[data-v-65e2e0fe]{margin:0}h1[data-v-65e2e0fe]{font-size:var(--h4-laptop)}li[data-v-65e2e0fe]{list-style:none;font-size:var(--h5-laptop);font-family:Open Sans;font-weight:400;margin:.5rem;text-align:left;max-width:100%;word-wrap:break-word}span[data-v-65e2e0fe]{font-weight:700;font-size:inherit}.form-control[data-v-65e2e0fe]{margin:.5rem 0;text-align:left;max-width:100%}.form-control label[data-v-65e2e0fe]{font-family:Open Sans;font-size:var(--h6-laptop);font-weight:700}h5[data-v-65e2e0fe]{font-size:var(--h5-laptop)}h4[data-v-65e2e0fe]{font-size:var(--h4-laptop)}.container[data-v-65e2e0fe]{display:grid;grid-template-columns:1fr 1fr 1fr;gap:1rem}.form-container[data-v-65e2e0fe],input[data-v-65e2e0fe],select[data-v-65e2e0fe]{padding:.5rem;max-width:100%}input[data-v-65e2e0fe],select[data-v-65e2e0fe]{display:block;margin-top:.5rem;height:2.5rem;border:1px solid var(--primary-color);border-radius:8px;font-size:var(--h6-laptop)}input[data-v-65e2e0fe]:focus,select[data-v-65e2e0fe]:focus{background-color:var(--black-5)}#validation-message[data-v-65e2e0fe],.error-message[data-v-65e2e0fe]{color:red;font-size:var(--h6-laptop)}.row[data-v-65e2e0fe]{display:flex;justify-content:flex-start;align-items:center;width:100%;max-width:100%;margin:1rem 0;gap:1rem}.top-top-container[data-v-65e2e0fe]{grid-template-columns:1fr 1fr;-moz-column-gap:2rem;column-gap:2rem}.main-top-container[data-v-65e2e0fe],.top-top-container[data-v-65e2e0fe]{display:grid;justify-content:space-evenly;max-width:100%}.main-top-container[data-v-65e2e0fe]{border:1px solid #000;border-radius:8px;padding:.5rem;grid-template-columns:1fr 1fr 1fr;gap:1rem}.top-container h5[data-v-65e2e0fe]{font-size:var(--h5-laptop);margin:0;text-align:start}.top-container[data-v-65e2e0fe]{border:1px solid #000;border-radius:8px;padding:.5rem;max-width:100%}.row h6[data-v-65e2e0fe]{font-size:var(--h6-laptop);margin:0}",""]),t["default"]=l},781:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return R}});var i=a(6768),o=a(4232),s=a(5130);const r=e=>((0,i.Qi)("data-v-65e2e0fe"),e=e(),(0,i.jt)(),e),l={class:"error-message"},n=r((()=>(0,i.Lk)("p",{class:"success"}," Edit Completed Successfullly",-1))),d={key:1},m=r((()=>(0,i.Lk)("h1",null,"Staff",-1))),f=r((()=>(0,i.Lk)("span",null," Name: ",-1))),u=r((()=>(0,i.Lk)("span",null,"Email: ",-1))),c=r((()=>(0,i.Lk)("span",null,"Phone Number: ",-1))),h=r((()=>(0,i.Lk)("span",null,"Role: ",-1))),p=r((()=>(0,i.Lk)("span",null,"Education: ",-1))),g={key:2},v=r((()=>(0,i.Lk)("h1",null,"Edit Staff",-1))),k={class:"form-container"},b={class:"main-top-container"},N={class:"form-control"},L=r((()=>(0,i.Lk)("label",{for:"firstName"},"First Name",-1))),y={class:"form-control"},w=r((()=>(0,i.Lk)("label",{for:"middleName"},"Middle Name",-1))),x={class:"form-control"},E=r((()=>(0,i.Lk)("label",{for:"lastName"},"Last Name",-1))),_={class:"form-control"},C=r((()=>(0,i.Lk)("label",{for:"phoneNumber"},"Phone Number",-1))),F={class:"form-control"},Q=r((()=>(0,i.Lk)("label",{for:"email"},"Email",-1))),S={class:"form-control"},I=r((()=>(0,i.Lk)("label",{for:"role"},"Role",-1))),z={key:0,id:"validation-message"};function W(e,t,a,r,W,V){const q=(0,i.g2)("base-dialog"),P=(0,i.g2)("base-spinner"),R=(0,i.g2)("base-card"),U=(0,i.g2)("base-button"),X=(0,i.g2)("base-button-container");return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.bF)(q,{show:!!W.error,title:"An error occurred",onClose:V.handleError},{default:(0,i.k6)((()=>[(0,i.Lk)("p",l,(0,o.v_)(W.error),1)])),_:1},8,["show","onClose"]),(0,i.bF)(q,{show:W.success&&!W.error,title:"Edit Completed Successfullly",onClose:V.handleSuccess},{default:(0,i.k6)((()=>[n])),_:1},8,["show","onClose"]),W.isLoading&&!W.error?((0,i.uX)(),(0,i.Wv)(q,{key:0,show:W.isLoading,title:"Loading...",fixed:""},{default:(0,i.k6)((()=>[(0,i.bF)(P)])),_:1},8,["show"])):(0,i.Q3)("",!0),W.isEditing||W.isLoading?W.isEditing?((0,i.uX)(),(0,i.CE)("section",g,[v,(0,i.bF)(R,null,{default:(0,i.k6)((()=>[(0,i.Lk)("div",k,[(0,i.Lk)("form",null,[(0,i.Lk)("div",b,[(0,i.Lk)("div",N,[L,(0,i.bo)((0,i.Lk)("input",{type:"text",id:"firstName","onUpdate:modelValue":t[0]||(t[0]=e=>W.firstName=e),required:""},null,512),[[s.Jo,W.firstName,void 0,{trim:!0}]])]),(0,i.Lk)("div",y,[w,(0,i.bo)((0,i.Lk)("input",{type:"text",id:"middleName","onUpdate:modelValue":t[1]||(t[1]=e=>W.middleName=e)},null,512),[[s.Jo,W.middleName,void 0,{trim:!0}]])]),(0,i.Lk)("div",x,[E,(0,i.bo)((0,i.Lk)("input",{type:"text",id:"lastName","onUpdate:modelValue":t[2]||(t[2]=e=>W.lastName=e),required:""},null,512),[[s.Jo,W.lastName,void 0,{trim:!0}]])]),(0,i.Lk)("div",_,[C,(0,i.bo)((0,i.Lk)("input",{type:"text",id:"phoneNumber","onUpdate:modelValue":t[3]||(t[3]=e=>W.phoneNumber=e),required:""},null,512),[[s.Jo,W.phoneNumber,void 0,{trim:!0}]])]),(0,i.Lk)("div",F,[Q,(0,i.bo)((0,i.Lk)("input",{type:"email",id:"email","onUpdate:modelValue":t[4]||(t[4]=e=>W.email=e),required:""},null,512),[[s.Jo,W.email,void 0,{trim:!0}]])]),(0,i.Lk)("div",S,[I,(0,i.bo)((0,i.Lk)("input",{type:"text",id:"role","onUpdate:modelValue":t[5]||(t[5]=e=>W.role=e),required:""},null,512),[[s.Jo,W.role,void 0,{trim:!0}]])])])]),W.formIsValid?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",z,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(this.errors,(e=>((0,i.uX)(),(0,i.CE)("p",{key:e},(0,o.v_)(e),1)))),128))])),(0,i.bF)(X,null,{default:(0,i.k6)((()=>[(0,i.bF)(U,{mode:"primary ",onClick:V.submitEdit},{default:(0,i.k6)((()=>[(0,i.eW)("Submit")])),_:1},8,["onClick"]),(0,i.bF)(U,{mode:"outline",onClick:V.backToProfile},{default:(0,i.k6)((()=>[(0,i.eW)("Cancel")])),_:1},8,["onClick"])])),_:1})])])),_:1})])):(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("section",d,[m,(0,i.bF)(R,null,{default:(0,i.k6)((()=>[(0,i.Lk)("ol",null,[(0,i.Lk)("li",null,[f,(0,i.eW)((0,o.v_)(V.getName),1)]),(0,i.Lk)("li",null,[u,(0,i.eW)((0,o.v_)(V.getEmail),1)]),(0,i.Lk)("li",null,[c,(0,i.eW)((0,o.v_)(V.getPhoneNumber),1)]),(0,i.Lk)("li",null,[h,(0,i.eW)(" "+(0,o.v_)(V.getStaffRole),1)]),(0,i.Lk)("li",null,[p,(0,i.eW)((0,o.v_)(V.getEducation),1)])])])),_:1}),(0,i.bF)(X,null,{default:(0,i.k6)((()=>[(0,i.bF)(U,{onClick:V.edit,mode:"primary "},{default:(0,i.k6)((()=>[(0,i.eW)("Edit")])),_:1},8,["onClick"]),(0,i.bF)(U,{onClick:V.remove,mode:"red"},{default:(0,i.k6)((()=>[(0,i.eW)("Remove Staff")])),_:1},8,["onClick"]),(0,i.bF)(U,{link:"",to:e.back,mode:"outline"},{default:(0,i.k6)((()=>[(0,i.eW)("Go Back")])),_:1},8,["to"])])),_:1})]))],64)}a(4114);var V={props:["sId"],data(){return{isLoading:!1,isEditing:!1,error:null,errros:[],staff:{},sexes:["Male","Female","Others"],firstName:"",middleName:"",lastName:"",email:"",age:"",phoneNumber:"",role:"",educationQualification:[],formIsValid:!0,success:!1}},computed:{editUrl(){return this.$route.path+"/edit"},getName(){let e=this.staff.name.firstName+" "+this.staff.name.middleName+" "+this.staff.name.lastName;return this.staff?.name?e:""},getEmail(){return this.staff?.email??""},getStaffRole(){return this.staff?.role??"N/A"},getPhoneNumber(){return this.staff?.phoneNumber??""},getEducation(){let e="";for(const[t,a]of this.staff?.educationQualification.entries()??[])t!=this.staff.educationQualification.length-1?e+=a+",":e+=a;return e}},methods:{addEducationRow(){this.educationQualification.push({name:""})},removeEducationRow(e){this.educationQualification.length>1&&this.educationQualification.splice(e,1)},backToProfile(){this.isEditing=!1},async remove(){const e={sId:this.sId};console.log(e)},edit(){if(this.isEditing=!0,this.firstName=this.staff?.name?.firstName??"",this.middleName=this.staff?.name?.middleName??"",this.lastName=this.staff?.name?.lastName??"",this.email=this.staff?.email??"","admin"!==this.role&&(this.phoneNumber=this.staff?.phoneNumber??"",this.staff.educationQualification)){for(const e of this.staff?.educationQualification??"")this.educationQualification.push({name:e});this.role=this.staff?.role??""}},async submitEdit(){const e=[];for(const i of this.educationQualification)e.push(i.name);if(!this.checkForm())return void(this.formIsValid=!1);const t={name:{firstName:this.firstName,middleName:this.middleName,lastName:this.lastName},email:this.email,phoneNumber:this.phoneNumber,role:this.role||null,educationQualification:e||null,sId:this.sId};this.isLoading=!0;try{await this.$store.dispatch("admin/updateStaffDetails",t),this.isLoading=!1}catch(a){this.error=a.message||"Failed to update, try later."}this.isEditing=!1,this.success=!0},handleError(){this.error=null},handleSuccess(){this.success=!1},checkForm(){if(this.errors=[],this.firstName&&""!==this.firstName||this.errors.push("First Name is required"),this.lastName&&""!==this.lastName||this.errors.push("Last Name is required"),this.email.includes("@")&&""!==this.email||this.errors.push("email is invalid"),"admin"!==this.role){""!==this.phoneNumber&&10===this.phoneNumber.length||this.errors.push("Phone Number is required");for(const[e,t]of this.educationQualification.entries())t.name&&""!==t.name||this.errors.push("Education Qualification should not be empty, at index "+(e+1))}return!this.errors.length}},async created(){this.isLoading=!0;try{await this.$store.dispatch("admin/fetchStaffDetails",{sId:this.sId});const e=this.$store.getters["admin/staffDetails"];console.log(e),this.staff={name:e.name||e.owner.name,email:e.email||e.owner.email,phoneNumber:e.phoneNumber,role:e.role||e.owner.role,sId:e._id,educationQualification:e.educationQualification||null},this.isLoading=!1}catch(e){this.error=e.message||"Failed to fetch, try later."}}},q=(a(6325),a(1241));const P=(0,q.A)(V,[["render",W],["__scopeId","data-v-65e2e0fe"]]);var R=P},6325:function(e,t,a){var i=a(4240);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);var o=a(8459).A;o("50afae88",i,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=781.2bdac8c9.js.map