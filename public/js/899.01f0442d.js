(self["webpackChunkhsa_spa"]=self["webpackChunkhsa_spa"]||[]).push([[899],{4515:function(t,e,a){"use strict";a.r(e);var s=a(1601),i=a.n(s),o=a(6314),n=a.n(o),r=n()(i());r.push([t.id,".appointmentDetail[data-v-c245967c]{list-style:none;max-width:100%}article[data-v-c245967c]{display:flex;flex-direction:column;justify-content:center;align-items:center;background-color:#fff;border:1px solid var(--black);max-width:100%;max-height:32rem;padding:1rem;border-radius:8px}@media (max-width:1200px){.appointmentDetail[data-v-c245967c],article[data-v-c245967c]{max-width:100%}article[data-v-c245967c]{padding:.5rem}}@media (max-width:600px){article[data-v-c245967c]{display:grid;justify-items:center;width:100%}.appointmentDetail[data-v-c245967c]{width:100%;padding:0}}h4[data-v-c245967c]{font-size:var(--h5-laptop)}",""]),e["default"]=r},8874:function(t,e,a){"use strict";a.r(e);var s=a(1601),i=a.n(s),o=a(6314),n=a.n(o),r=n()(i());r.push([t.id,"h4[data-v-6d53f8f2]{font-size:var(--h5-laptop);text-align:center;color:#000}h5[data-v-6d53f8f2]{font-size:var(--h6-laptop)}h2[data-v-6d53f8f2]{font-size:var(--h4-laptop)}.form-control[data-v-6d53f8f2]{margin:.5rem 0;text-align:left}.form-control label[data-v-6d53f8f2]{font-family:Open Sans,sans-serif;font-size:var(--h6-laptop);font-weight:700}form[data-v-6d53f8f2]{gap:1rem}form[data-v-6d53f8f2],section[data-v-6d53f8f2]{display:flex;flex-direction:column;max-width:100%}section[data-v-6d53f8f2]{margin:1rem 2rem;padding:0;align-items:center;flex:1}.form-container[data-v-6d53f8f2]{padding:1rem;background-color:transparent}input[data-v-6d53f8f2],select[data-v-6d53f8f2]{display:block;width:100%;margin-top:.5rem;height:2.5rem;border:1px solid var(--primary-color);padding:.5rem;border-radius:8px;font-size:var(--h6-laptop)}span[data-v-6d53f8f2]{font-weight:400}input[data-v-6d53f8f2]:focus{background-color:var(--black-5)}#validation-message[data-v-6d53f8f2]{color:red;font-size:var(--h6-laptop)}",""]),e["default"]=r},6649:function(t,e,a){"use strict";a.d(e,{A:function(){return p}});var s=a(6768),i=a(4232),o=a(5130);const n={class:"appointmentDetail"};function r(t,e,a,r,d,l){const u=(0,s.g2)("card-details-grid-element"),c=(0,s.g2)("base-grid"),p=(0,s.g2)("base-button"),h=(0,s.g2)("base-button-container");return(0,s.uX)(),(0,s.CE)("li",n,[(0,s.Lk)("article",null,[(0,s.Lk)("h4",null,[(0,s.eW)(" Appointment "),(0,s.bo)((0,s.Lk)("span",null,(0,i.v_)(a.index+1),513),[[o.aG,a.index+1]])]),(0,s.bF)(c,null,{default:(0,s.k6)((()=>[(0,s.bF)(u,null,{default:(0,s.k6)((()=>[(0,s.eW)("Doctor: "+(0,i.v_)(l.getDoctorName),1)])),_:1}),(0,s.bF)(u,null,{default:(0,s.k6)((()=>[(0,s.eW)("Patient: "+(0,i.v_)(l.getPatientName),1)])),_:1}),(0,s.bF)(u,null,{default:(0,s.k6)((()=>[(0,s.eW)("Start: "+(0,i.v_)(l.getStartTime),1)])),_:1}),(0,s.bF)(u,null,{default:(0,s.k6)((()=>[(0,s.eW)("Date: "+(0,i.v_)(this.date),1)])),_:1}),(0,s.bF)(u,null,{default:(0,s.k6)((()=>[(0,s.eW)("Address: "+(0,i.v_)(l.getHospitalAddress),1)])),_:1}),(0,s.bF)(u,null,{default:(0,s.k6)((()=>[(0,s.eW)("Status: "+(0,i.v_)(this.status),1)])),_:1}),this.fees?((0,s.uX)(),(0,s.Wv)(u,{key:0},{default:(0,s.k6)((()=>[(0,s.eW)("Total Fees: "+(0,i.v_)(l.getTotalAmount),1)])),_:1})):(0,s.Q3)("",!0),(0,s.bF)(u,null,{default:(0,s.k6)((()=>[(0,s.eW)("Duration: "+(0,i.v_)(this.duration)+" minutes",1)])),_:1})])),_:1}),(0,s.bF)(h,null,{default:(0,s.k6)((()=>[(0,s.bF)(p,{link:"",to:l.appointmentDetailsLink,mode:"primary"},{default:(0,s.k6)((()=>[(0,s.eW)("View Detail")])),_:1},8,["to"]),l.isAdmin?((0,s.uX)(),(0,s.Wv)(p,{key:0,class:(0,i.C4)({disable:"approve"===d.disableButton}),onClick:e[0]||(e[0]=t=>l.approve(this.id)),mode:"outline"},{default:(0,s.k6)((()=>[(0,s.eW)("Approve")])),_:1},8,["class"])):(0,s.Q3)("",!0),l.isAdmin?((0,s.uX)(),(0,s.Wv)(p,{key:1,class:(0,i.C4)({disable:"cancel"===d.disableButton}),onClick:e[1]||(e[1]=t=>l.cancel(this.id)),mode:"outline"},{default:(0,s.k6)((()=>[(0,s.eW)("Cancel")])),_:1},8,["class"])):(0,s.Q3)("",!0),l.isDoctor?((0,s.uX)(),(0,s.Wv)(p,{key:2,link:"",to:l.appointmentConsultDetailsLink,mode:"outline"},{default:(0,s.k6)((()=>[(0,s.eW)("Consult(Doctor)")])),_:1},8,["to"])):(0,s.Q3)("",!0),l.isDoctor||l.isAdmin?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(p,{key:3,button:"",mode:"flat"},{default:(0,s.k6)((()=>[(0,s.eW)("Notify me")])),_:1}))])),_:1})])])}var d=a(4116),l={props:["id","doctorName","patientName","index","duration","startTime","date","status","hospitalAddress","fees"],data(){return{disableButton:null}},computed:{getTotalAmount(){return this.fees?.getTotalAmount??0},appointmentDetailsLink(){return this.isAdmin&&this.id?"/admin/appointments/"+this.id:this.isDoctor&&this.id?"/doctor/appointments/"+this.id:"/patient/appointments"===this.$route.path||"/doctor/appointments"===this.$route.path||"/doctor/appointments"===this.$route.path?this.$route.path+"/"+this.id:this.$route.path+"/appointments/"+this.id},appointmentConsultDetailsLink(){return"/doctor/consult/"+this.id??""},getHospitalAddress(){return(this.hospitalAddress?.streetAddress?.[0]??"")+(this.hospitalAddress?.streetAddress?.[1]??"")+(this.hospitalAddress?.city??"")},getStartTime(){if(this.startTime){const t=d.c9.fromFormat(this.startTime,"HH:mm",{zone:"Asia/Kolkata"});return t.toLocaleString({hour:"numeric",minute:"2-digit"}).toLowerCase()}return"Not available"},getDuration(){return this.duration+" Minutes"},getDoctorName(){return"doctor: "+(this.doctorName??"")},getPatientName(){return"patient: "+(this.patientName??"Unknown")},isDoctor(){return this.$store.getters["auth/isDoctor"]},isAdmin(){return this.$store.getters["auth/isAdmin"]}},methods:{approve(t){this.setDisableButton("approve"),this.$emit("approve",t)},cancel(t){this.setDisableButton("cancel"),this.$emit("cancel",t)},setDisableButton(t){this.disableButton===t?this.disableButton=null:this.disableButton=t}}},u=(a(5294),a(1241));const c=(0,u.A)(l,[["render",r],["__scopeId","data-v-c245967c"]]);var p=c},1766:function(t,e,a){"use strict";a.d(e,{A:function(){return l}});var s=a(6768);function i(t,e,a,i,o,n){const r=(0,s.g2)("AppointmentItem"),d=(0,s.g2)("base-list"),l=(0,s.g2)("base-card");return(0,s.uX)(),(0,s.Wv)(l,null,{default:(0,s.k6)((()=>[(0,s.bF)(d,null,{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(this.appointments,((t,e)=>((0,s.uX)(),(0,s.Wv)(r,{key:t.id,onApprove:n.approve,onCancel:n.cancel,id:t.id,doctorName:t.doctorName,patientName:t.patientName,index:e,duration:t.duration,startTime:t.startTime,date:t.date,status:t.status,hospitalAddress:t.hospitalAddress,fees:t.fees},null,8,["onApprove","onCancel","id","doctorName","patientName","index","duration","startTime","date","status","hospitalAddress","fees"])))),128))])),_:1})])),_:1})}var o=a(6649),n={props:["appointments"],components:{AppointmentItem:o.A},data(){return{}},methods:{cat(){console.log(this.appointments)},approve(t){this.$emit("approveTop",t)},cancel(t){this.$emit("cancelTop",t)}}},r=a(1241);const d=(0,r.A)(n,[["render",i]]);var l=d},899:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return w}});var s=a(6768),i=a(4232),o=a(5130);const n=t=>((0,s.Qi)("data-v-6d53f8f2"),t=t(),(0,s.jt)(),t),r={class:"error-message"},d={key:0},l=n((()=>(0,s.Lk)("p",{class:"success"},"Appointment Status Updated Successfullly",-1))),u={key:1},c=n((()=>(0,s.Lk)("h4",null,"Search Date and Shift ",-1))),p={class:"form-container"},h={class:"form-control"},m=n((()=>(0,s.Lk)("label",{for:"date"},"Date",-1))),f={class:"form-control"},v=n((()=>(0,s.Lk)("label",{for:"shift"},"Shift",-1))),k=["value"],g={key:0,id:"validation-message"},b={key:2,class:"appointment-row-container"},_={key:0},A={key:1,id:"validation-message"};function y(t,e,a,n,y,C){const L=(0,s.g2)("base-dialog"),S=(0,s.g2)("base-spinner"),D=(0,s.g2)("base-button"),F=(0,s.g2)("base-button-container"),w=(0,s.g2)("base-card"),T=(0,s.g2)("TheAppointmentsRow");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(L,{show:!!y.error,title:"An error occurred",onClose:C.handleError},{default:(0,s.k6)((()=>[(0,s.Lk)("p",r,(0,i.v_)(y.error),1)])),_:1},8,["show","onClose"]),y.isLoading?((0,s.uX)(),(0,s.CE)("div",d,[(0,s.bF)(S)])):(0,s.Q3)("",!0),(0,s.bF)(L,{show:y.success,title:"Appointment Status Updated Successfullly",onClose:C.handleSuccess},{default:(0,s.k6)((()=>[l])),_:1},8,["show","onClose"]),!y.isLoading&&y.doctor?((0,s.uX)(),(0,s.CE)("section",u,[(0,s.bF)(w,null,{default:(0,s.k6)((()=>[c,(0,s.Lk)("h5",null,"Doctor: "+(0,i.v_)(C.getName),1),(0,s.Lk)("div",p,[(0,s.Lk)("form",null,[(0,s.Lk)("div",h,[m,(0,s.bo)((0,s.Lk)("input",{type:"date",id:"date","onUpdate:modelValue":e[0]||(e[0]=t=>y.date=t)},null,512),[[o.Jo,y.date,void 0,{trim:!0}]])]),(0,s.Lk)("div",f,[v,(0,s.bo)((0,s.Lk)("select",{id:"shift","onUpdate:modelValue":e[1]||(e[1]=t=>y.shift=t)},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(this.doctor.shifts,(t=>((0,s.uX)(),(0,s.CE)("option",{key:t,value:t},(0,i.v_)(C.getShift(t)),9,k)))),128))],512),[[o.u1,y.shift]])])]),!y.formIsValid&&this.errors?((0,s.uX)(),(0,s.CE)("div",g,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(this.errors,(t=>((0,s.uX)(),(0,s.CE)("p",{key:t},(0,i.v_)(t),1)))),128))])):(0,s.Q3)("",!0),(0,s.bF)(F,null,{default:(0,s.k6)((()=>[(0,s.bF)(D,{mode:"primary",onClick:(0,o.D$)(C.search,["prevent"])},{default:(0,s.k6)((()=>[(0,s.eW)("Search")])),_:1},8,["onClick"]),(0,s.eW)(),(0,s.bF)(D,{mode:"outline",link:"",to:C.editScheduleLink},{default:(0,s.k6)((()=>[(0,s.eW)("Update Schedule")])),_:1},8,["to"]),(0,s.bF)(D,{mode:"flat",link:"",to:"/admin/doctors"},{default:(0,s.k6)((()=>[(0,s.eW)("Back")])),_:1})])),_:1})])])),_:1})])):(0,s.Q3)("",!0),0!==C.appointments?.length?((0,s.uX)(),(0,s.CE)("section",b,[(0,s.Lk)("h4",null,[(0,s.eW)(" Date: "),(0,s.Lk)("span",null,(0,i.v_)(this.date),1),(0,s.eW)(" Shift:"),(0,s.Lk)("span",null,(0,i.v_)(C.getShift(this.shift)),1)]),0===C.appointments?.length?((0,s.uX)(),(0,s.CE)("p",_," No Appointments has been approved for this schedule. ")):(0,s.Q3)("",!0),(0,s.bF)(T,{onApproveTop:C.approve,onCancelTop:C.cancel,appointments:C.appointments},null,8,["onApproveTop","onCancelTop","appointments"]),(0,s.bF)(F,null,{default:(0,s.k6)((()=>[(0,s.bF)(D,{mode:"primary",onClick:(0,o.D$)(C.completed,["prevent"])},{default:(0,s.k6)((()=>[(0,s.eW)("Complete")])),_:1},8,["onClick"]),(0,s.eW)(),(0,s.bF)(D,{mode:"outline",onClick:(0,o.D$)(C.unMark,["prevent"])},{default:(0,s.k6)((()=>[(0,s.eW)("Mark to zero")])),_:1},8,["onClick"])])),_:1}),y.formIsValid?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",A,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(this.statusError,(t=>((0,s.uX)(),(0,s.CE)("p",{key:t},(0,i.v_)(t),1)))),128))]))])):(0,s.Q3)("",!0)],64)}a(4114);var C=a(4116),L=a(1766),S={props:["dId"],components:{TheAppointmentsRow:L.A},data(){return{formIsValid:!0,isLoading:!1,error:null,success:!1,date:"",doctor:{},shift:{},errors:[],status:[],statusError:[]}},computed:{editScheduleLink(){return"/admin/schedule/"+this.dId+"/edit"},appointments(){const t=this.$store.getters["admin/searchedScheduleAppointments"]??[],e=[];console.log(t);for(const a of t){const t={id:a?._id??"",patientName:a?.patientName??"",doctorName:a.doctorName??"",date:a?.ISTDateString??"",startTime:a?.startTime??"",hospitalAddress:a?.hospitalAddress??null,duration:a?.duration??null,hospitalName:a?.hospitalName??"",status:a?.status??"pending"};e.push(t)}return e},getName(){return this.doctor?.name?`${this.doctor?.name?.firstName??""} ${this.doctor?.name?.middleName??""} ${this.doctor?.name?.lastName??""}`:""}},methods:{unMark(){this.status=[],console.log(this.status),alert("UnMarked Done")},async search(){if(!this.checkForm())return void(this.formIsValid=!1);this.isLoading=!0;let t=JSON.stringify(this.shift);t=JSON.parse(t);const e={dId:this.dId,date:this.date,shift:t};try{await this.$store.dispatch("admin/fetchSearchedSchedule",e)}catch(a){this.error=a}this.isLoading=!1},completed(){if(this.status.length<this.appointments.length)return this.statusError.push("please check all status"),void(this.formIsValid=!1);this.statusError=[];const t={dId:this.dId,status:this.status};try{this.isLoading=!0,this.$store.dispatch("admin/updateAppointmentStatusMany",t),this.isLoading=!1,this.success=!0,this.status=[]}catch(e){this.error=e.message||"Something went wrong!"}},getShift(t){let e="";if(t?.startTime&&t?.endTime){const a=C.c9.fromFormat(t.startTime,"HH:mm",{zone:"Asia/Kolkata"}).toLocaleString({hour:"numeric",minute:"2-digit"}).toLowerCase(),s=C.c9.fromFormat(t.endTime,"HH:mm",{zone:"Asia/Kolkata"}).toLocaleString({hour:"numeric",minute:"2-digit"}).toLowerCase();e+=a+" - "+s}return e},checkForm(){return this.errors=[],this.date&&/^\d{4}-\d{2}-\d{2}$/.test(this.date)||this.errors.push("date is invalid"),this.shift.startTime&&""!==this.shift.startTime&&/^([01]\d|2[0-3]):([0-5]\d)$/.test(this.shift.startTime)||this.errors.push("Shift Start is invalid"),this.shift.endTime&&""!==this.shift.endTime&&/^([01]\d|2[0-3]):([0-5]\d)$/.test(this.shift.endTime)||this.errors.push("Shift End is invalid"),!this.errors.length},handleError(){this.error=null},handleSuccess(){this.success=!1},approve(t){const e=this.status.find((e=>e.aId===t));e?e.status="approved":this.status.push({aId:t,status:"approved"})},cancel(t){const e=this.status.find((e=>e.aId===t));e?e.status="cancelled":this.status.push({aId:t,status:"cancelled"})}},async created(){this.isLoading=!0;try{await this.$store.dispatch("admin/fetchDoctorList");const t=this.$store.getters["admin/doctorList"].find((t=>t.sId===this.dId))??{};this.doctor={name:t?.name??"",id:t?.sId??"",shifts:t?.shifts??[],specialty:t?.specialty??[]},this.isLoading=!1}catch(t){this.error=t.message||"Something went wrong!"}}},D=(a(9457),a(1241));const F=(0,D.A)(S,[["render",y],["__scopeId","data-v-6d53f8f2"]]);var w=F},5294:function(t,e,a){var s=a(4515);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[t.id,s,""]]),s.locals&&(t.exports=s.locals);var i=a(8459).A;i("62d0b1f0",s,!0,{sourceMap:!1,shadowMode:!1})},9457:function(t,e,a){var s=a(8874);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[t.id,s,""]]),s.locals&&(t.exports=s.locals);var i=a(8459).A;i("c9e142a8",s,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=899.01f0442d.js.map